---
import "../styles/global.css";
import "../styles/markdown-layout.css";
import BaseLayout from "./BaseLayout.astro";

const { frontmatter, headings } = Astro.props;

const hasNavigation = frontmatter.prev !== null || frontmatter.next !== null;
---

<BaseLayout title={frontmatter.title}>
  <div class="w-[80%] mx-auto my-12">
    <h1>{frontmatter.title}</h1>
    <div class="flex flex-row flex-3/4 gap-12 relative">
      <div>
        <slot />
        {
          hasNavigation && (
            <div class="mt-4 pt-4 flex flex-row justify-between border-t-1 border-t-neutral-200">
              {frontmatter.prev != null && (
                <a
                  href={frontmatter.prev.path}
                  class="px-4 py-2 border-1 border-neutral-400 rounded-md !no-underline"
                >
                  ← {frontmatter.prev.name}
                </a>
              )}
              {frontmatter.next != null && (
                <a
                  href={frontmatter.next.path}
                  class="px-4 py-2 border-1 border-neutral-400 rounded-md !no-underline"
                >
                  {frontmatter.next.name} →
                </a>
              )}
            </div>
          )
        }
      </div>
      <div class="flex-1/4 sticky top-4 h-full">
        <p class="text-neutral-400">Table of Contents</p>
        {
          headings.map(({ depth, slug, text }) => (
            <a
              class={`inline-block w-full text-sm text-sky-300`}
              style={`margin-left: ${(depth - 2) * 8}px`}
              href={`#${slug}`}
            >
              {text}
            </a>
          ))
        }
      </div>
    </div>
  </div>
</BaseLayout>
